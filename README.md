<<<<<<< HEAD
# MyBook_ParserTelebot

***MyBook_ParserTelebot*** - это бот Telegram, 
который может анализировать сайт [MyBook.ru](https://mybook.ru/)
и рассылать сообщения пользователям с новыми книгами, появившимися в доступе.

После старта бота */start* пользователю необходимо ввести своё имя и подтвердить желание получать сообщения.
Данные пользователей *(id, имя, выбор о периодической рассылке, последняя просмотренная книга)* 
хранятся в созданном файле **users.json**.

По умолчанию поиск новых книг на сайте [MyBook.ru](https://mybook.ru/) проводится каждые 24 часа.

В случае обнаружения новых книг программа отправляет сообщения пользователям, 
подтвердившим желание получать оповещения.

Выбор об оповещениях можно изменить, введя заново команду */start*, и нажав соответствующую кнопку в сообщении.

## Установка

1. Код игры писался на **Python 3.12**
2. Для асинхронности кода используется пакет ***asyncio	3.4.3***

```pip install asyncio==3.4.3```

3. Работу бота обеспечивает пакет ***aiogram	3.10.0***

```pip install aiogram==3.10.0```

4. Переменные окружения из файла ***.env*** загружаются с помощью ***environs	11.0.0***

```pip install environs==11.0.0```

5. Суп варит ***beautifulsoup4	4.12.3***

```pip install beautifulsoup4==4.12.3```

6. Запрашивает информацию у сайта модуль ***requests	2.32.3***

```pip install requests==2.32.3```

7. Подделывает User-agent модуль ***fake-useragent	1.5.1***

```pip install fake-useragent==1.5.1```

## Подготовка программы

1. Перед запуском программы необходимо получить токен от телеграм;


Нажмите на картинку, введите команду */token* и действуйте согласно инструкции в сообщениях
[![icon_bot_father](service_file/icon_bot_father.jpg)](https://t.me/botfather)

2. Скачайте и откройте с помощью вашего IDE репозиторий 
**MyBook_ParserTelebot**;

3. Создайте в корневой папке файл **.env** и согласно примеру **.env_example** введите корректный токен бота.

## Запуск программы

Запуск программы осуществляется из файла **main_file.py**.

## Поддержка
Если у вас есть замечания, вопросы или рекомендации к моей работе, прошу вас написать сообщение в обсуждении: 
[ссылка](https://github.com/borshcheed13/MyBook_ParserTelebot/discussions/1)

## Проверка работоспособности периодической рассылки


По умолчанию поиск новых книг на сайте [MyBook.ru](https://mybook.ru/) проводится каждые 24 часа.

Чтобы проверить работоспособность периодической рассылки, 
проверяющему необходимо выполнить следующие действия:
1. В файле 'parser_my_book.py' в строке 47
    изменить индекс книги, которая будет считаться последней на '-1';
    ```python
    self.presented_book = super().last_ten_books()[-1]
    ```

2. В файле 'sending.py' в строке 22
    уменьшить интервал рассылки;
    ```python
   self.time_interval = 180
   ```
   
3. Запустить файл **main_file.py**;
4. В приложении **Telegram** завершить опрос бота;
5. Дождаться очередной парсинг сайта.
